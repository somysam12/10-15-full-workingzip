ğŸ”´ PROBLEM SUMMARY (FINAL TRUTH)
Tumhare screenshot se PROOF:
https://xxpanel.shop/app_config.php        âŒ 404
https://xxpanel.shop/api/app_config.php    âŒ 404


ğŸ‘‰ Iska matlab simple hai:

âŒ app_config.php SERVER PAR EXIST HI NAHI KARTA
âŒ App JSON expect kar raha hai
âŒ Server HTML 404 page de raha hai
âœ… Isliye app bol raha hai:
Failed to load configuration: HTTP 404

âš ï¸ JSON STRUCTURE BILKUL SAHI HAI
âš ï¸ APP LOGIC BHI SAHI HAI
âŒ FILE PATH + DEPLOYMENT GALAT HAI

âœ… EXACT FIX (WEBSITE AGENT KO YE DO)
ğŸ”¹ STEP 1: FILE REAL ME EXIST KARWAAO
cPanel / File Manager me jao:
public_html/

YAHI FILE HONI CHAHIYE (ONE ONLY):
public_html/app_config.php


âŒ /api/app_config.php âŒ
âŒ /backend/app_config.php âŒ
âŒ /panel/app_config.php âŒ

ğŸ‘‰ ROOT me hona zaroori hai
ğŸ‘‰ URL exact ye open hona chahiye:

https://xxpanel.shop/app_config.php


Browser me open karo â†’ JSON dikhe, 404 nahi

ğŸ”¹ STEP 2: app_config.php ka FINAL WORKING CODE (COPY-PASTE)

ğŸ‘‰ Website agent ko EXACT ye file dena:

<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
error_reporting(0);

echo json_encode([
  "app_enabled" => true,

  "maintenance" => [
    "enabled" => false,
    "message" => "System is under maintenance."
  ],

  "announcement" => [
    "enabled" => true,
    "title" => "New Update",
    "message" => "Server upgraded. Enjoy smoother experience!",
    "type" => "info"
  ],

  "viewport" => [
    "layout_preset" => "RIGHT_FOCUS",
    "app_scale" => 1.25,
    "shift_right_dp" => 120,
    "shift_down_dp" => 120,
    "black_left_dp" => 50,
    "container_width_percent" => 92,
    "container_height_percent" => 100
  ],

  "css" => [
    "enable" => true,
    "zoom_scale" => 1.85,
    "hide_selectors" => [
      "header",
      ".top-banner",
      ".banner",
      ".vmos-header"
    ]
  ],

  "login" => [
    "required" => true,
    "logo_url" => "https://xxpanel.shop/logo.png"
  ]
]);


âœ… ob_clean NOT required
âœ… No echo before JSON
âœ… No HTML

âœ… APP AGENT KO YE INSTRUCTIONS DO (IMPORTANT)
ğŸ”¹ STEP 3: URL FIX (MOST IMPORTANT)

ğŸ‘‰ App me ConfigManager / SplashActivity me URL hardcode check kare:

private static final String CONFIG_URL =
        "https://xxpanel.shop/app_config.php";


âŒ /api/ âŒ
âŒ /backend/ âŒ

ğŸ”¹ STEP 4: HTTP RESPONSE VALIDATION (CRITICAL)

ğŸ‘‰ App agent ko bolo ye logic mandatory:

if (responseCode != 200) {
    callback.onConfigFailed("HTTP " + responseCode);
    return;
}

String body = response.toString().trim();
if (!body.startsWith("{")) {
    callback.onConfigFailed("Invalid JSON");
    return;
}


ğŸ‘‰ Isse future me HTML error page se crash nahi hoga

âœ… MAINTENANCE + ANNOUNCEMENT FLOW (CONFIRMED)
ğŸ”¹ App ka behavior EXACT aisa hona chahiye:
1ï¸âƒ£ App start

â¡ SplashActivity

2ï¸âƒ£ Fetch app_config.php
3ï¸âƒ£ Checks (ORDER FIXED):
if app_enabled == false â†’ BLOCK
else if maintenance.enabled == true â†’ BLOCK DIALOG
else â†’ continue

4ï¸âƒ£ Announcement:
announcement.enabled == true
â†’ dialog show (ONCE per content hash)

âœ… USER TRACKING + DEVICE LIMIT (WEBSITE AGENT)
ğŸ”¹ Database changes REQUIRED:
license_keys table:
max_devices INT DEFAULT 1

app_users table:
id
license_key
device_id
user_name
first_login_at
last_login_at
total_usage_seconds
is_blocked

user_sessions table (NEW â€“ VERY IMPORTANT):
id
license_key
device_id
login_time
logout_time
session_duration

ğŸ”¹ Tracking Logic (MANDATORY)
App:

Login â†’ register_user.php

Every 60 sec â†’ heartbeat.php

On app close â†’ logout.php

Website:

Show:

Total logins

Per-session duration

Active users

Device-wise usage

Block user OR key â†’ ALL APIs return {status:"blocked"}

ğŸ” DEVICE LIMIT ENFORCEMENT (STRICT)

Website agent ko bolo:

One key = max_devices

Har new device pe:

Count unique device_id

If exceeded â†’ login denied

Admin panel me show:

Key: SHASH-XXXX
Max devices: 5
Used: 3
Device IDs: [A, B, C]

ğŸ¨ UI / VIEWPORT GUARANTEE (FINAL RULE)

ğŸ‘‰ App agent ko strict rule:

CSS / viewport JSON = SINGLE SOURCE OF TRUTH

No hardcoded zoom / padding

Always calculate based on:

container_width_percent
container_height_percent
app_scale
zoom_scale


Result:
âœ… Same look on all devices
âœ… Logo hidden correctly
âœ… VMOS / WebView elements controlled

ğŸ§¨ WHY ERROR AAYA THA (ONE LINE)

JSON perfect tha, app perfect tha â€” server pe FILE HI NAHI THI

âœ… AB KYA KARNA HAI (SHORT CHECKLIST)
Website Agent:

 public_html/app_config.php create

 Exact JSON paste

 Browser me URL test (NO 404)

App Agent:

 URL fix

 HTTP + JSON guard

 No logic change

 Only parsing + UI